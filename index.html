<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RJ Services - Job Listings & Applications</title>
    <style>
        /* CSS Styling */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #007bff;
            color: white;
            padding: 20px 0;
            text-align: center;
        }

        h1 {
            margin: 0;
        }

        .search-bar {
            margin-top: 10px;
        }

        .search-bar input {
            padding: 10px;
            width: 70%;
            margin-right: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .search-bar button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .search-bar button:hover {
            background-color: #0056b3;
        }

        .job-listings {
            margin: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .jobs-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .job-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .job-item h3 {
            margin-top: 0;
        }

        .apply-btn {
            margin-top: 10px;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .apply-btn:hover {
            background-color: #218838;
        }

        .post-job {
            margin: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .post-job form, #apply-form {
            display: flex;
            flex-direction: column;
        }

        .post-job input, .post-job textarea, #apply-form input {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .post-job button, #apply-form button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        footer {
            text-align: center;
            padding: 10px;
            background-color: #007bff;
            color: white;
        }

        /* Application form modal */
        #apply-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
            z-index: 1000;
            width: 300px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }

        #apply-modal-close {
            align-self: flex-end;
            cursor: pointer;
            color: #aaa;
            font-size: 20px;
        }
    </style>
</head>
<body>

<header>
    <h1>RJ Services - Job Listings</h1>
    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search for jobs...">
        <button onclick="searchJobs()">Search</button>
    </div>
</header>

<!-- Google Sign-In Button -->
<div id="google-signin-button">
    <button onclick="googleSignIn()">Sign in with Google</button>
</div>

<!-- Job Listings Section -->
<section class="job-listings">
    <h2>Available Job Listings</h2>
    <div class="jobs-container" id="jobs-container">
        <!-- Job listings will be dynamically loaded here -->
    </div>
</section>

<!-- Job Post Form Section -->
<section class="post-job">
    <h2>Post a New Job</h2>
    <form id="post-job-form">
        <label for="job-title">Job Title</label>
        <input type="text" id="job-title" placeholder="Enter job title" required>

        <label for="location">Location</label>
        <input type="text" id="location" placeholder="Enter job location" required>

        <label for="salary">Salary Range</label>
        <input type="text" id="salary" placeholder="Enter salary range" required>

        <label for="description">Job Description</label>
        <textarea id="description" placeholder="Enter job description" required></textarea>

        <label for="contact">Contact (Email or WhatsApp)</label>
        <input type="text" id="contact" placeholder="Enter contact email or WhatsApp number" required>

        <button type="submit">Post Job</button>
    </form>
</section>

<!-- Application Form Modal -->
<div id="apply-modal">
    <span id="apply-modal-close" onclick="closeApplyModal()">x</span>
    <h2>Apply for Job</h2>
    <form id="apply-form">
        <label for="applicant-name">Your Name</label>
        <input type="text" id="applicant-name" placeholder="Enter your name" required>

        <label for="applicant-email">Your Email</label>
        <input type="email" id="applicant-email" placeholder="Enter your email" required>

        <label for="resume-link">Resume Link</label>
        <input type="url" id="resume-link" placeholder="Enter link to your resume" required>

        <button type="submit">Submit Application</button>
    </form>
</div>

<footer>
    <p>&copy; 2024 RJ Services | All rights reserved.</p>
</footer>

<script type="module">
    // Import Firebase SDK for authentication
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyA29bzuGtzVW-j5uH7rcEoQ3Uo5rqH84Bw",
        authDomain: "jobs-c48f6.firebaseapp.com",
        projectId: "jobs-c48f6",
        storageBucket: "jobs-c48f6.firebasestorage.app",
        messagingSenderId: "442042297958",
        appId: "1:442042297958:web:5f8f5cf087b0ab6af6c7a7",
        measurementId: "G-08YTDGG4RL"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Google Sign-In function
    function googleSignIn() {
        signInWithPopup(auth, provider)
            .then((result) => {
                console.log("User signed in:", result.user);
                alert(`Welcome, ${result.user.displayName}`);
                // You can save the user info to localStorage or display it on the UI
            })
            .catch((error) => {
                console.error("Error signing in:", error);
            });
    }

    // Sign out function
    function googleSignOut() {
        signOut(auth).then(() => {
            console.log("User signed out");
        }).catch((error) => {
            console.error("Error signing out:", error);
        });
    }
</script>

<script>
    const jobs = JSON.parse(localStorage.getItem('jobs')) || [];
    let currentJobId = null;

    function displayJobs() {
        const jobsContainer = document.getElementById('jobs-container');
        jobsContainer.innerHTML = '';
        jobs.forEach((job, index) => {
            const jobElement = document.createElement('div');
            jobElement.classList.add('job-item');
            jobElement.innerHTML = `
                <h3>${job.title}</h3>
                <p>${job.description}</p>
                <button class="apply-btn" onclick="openApplyModal(${index})">Apply</button>
            `;
            jobsContainer.appendChild(jobElement);
        });
    }

    function searchJobs() {
        const query = document.getElementById('search-input').value.toLowerCase();
        const filteredJobs = jobs.filter(job => job.title.toLowerCase().includes(query));
        jobsContainer.innerHTML = '';
        filteredJobs.forEach((job) => {
            const jobElement = document.createElement('div');
            jobElement.classList.add('job-item');
            jobElement.innerHTML = `
                <h3>${job.title}</h3>
                <p>${job.description}</p>
                <button class="apply-btn" onclick="openApplyModal(${job.id})">Apply</button>
            `;
            jobsContainer.appendChild(jobElement);
        });
    }

    function openApplyModal(index) {
        currentJobId = index;
        document.getElementById('apply-modal').style.display = 'block';
    }

    function closeApplyModal() {
        document.getElementById('apply-modal').style.display = 'none';
    }

    document.getElementById('post-job-form').addEventListener('submit', (event) => {
        event.preventDefault();
        const title = document.getElementById('job-title').value;
        const location = document.getElementById('location').value;
        const salary = document.getElementById('salary').value;
        const description = document.getElementById('description').value;
        const contact = document.getElementById('contact').value;

        const job = { id: jobs.length, title, location, salary, description, contact };
        jobs.push(job);
        localStorage.setItem('jobs', JSON.stringify(jobs));
        displayJobs();

        // Reset form after submission
        event.target.reset();
    });

    document.getElementById('apply-form').addEventListener('submit', (event) => {
        event.preventDefault();
        const name = document.getElementById('applicant-name').value;
        const email = document.getElementById('applicant-email').value;
        const resume = document.getElementById('resume-link').value;

        const job = jobs[currentJobId];
        console.log(`Applied for ${job.title} by ${name} (Email: ${email})`);
        alert('Application submitted!');

        // Reset application form
        event.target.reset();
        closeApplyModal();
    });

    // Initial jobs display
    displayJobs();
</script>

</body>
</html>
